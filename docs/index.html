<html>
<head>
    <title> Home </title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">
    <meta name="keywords" content="">
    <meta name="generator" content="JBake">

    <!-- Le styles -->
    <link href="css/bootstrap.min.css" rel="stylesheet">
    <link href="css/asciidoctor.css" rel="stylesheet">
    <link href="css/base.css" rel="stylesheet">
    <link href="css/prettify.css" rel="stylesheet">

    <!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
    <script src="js/html5shiv.min.js"></script>
    <![endif]-->


    <link rel="shortcut icon" href="favicon.ico">
</head>
<body onload="prettyPrint()">

<div id="wrap">
    <!-- Fixed navbar -->
<div class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href=""> Fazeem's Blog</a>
        </div>
        <div class="navbar-collapse collapse">
            <ul class="nav navbar-nav">
                <li><a href="index.html">Home</a></li>
                <li><a href="about.html">About</a></li>
<!--                <li><a href="feed.xml">Subscribe</a></li>-->
<!--                <li><a href="sitemap.xml">SiteMap</a></li>-->
<!--                <li class="dropdown">-->
<!--                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">Dropdown <b class="caret"></b></a>-->
<!--                    <ul class="dropdown-menu">-->
<!--                        <li><a href="#">Action</a></li>-->
<!--                        <li><a href="#">Another action</a></li>-->
<!--                        <li><a href="#">Something else here</a></li>-->
<!--                        <li class="divider"></li>-->
<!--                        <li class="dropdown-header">Nav header</li>-->
<!--                        <li><a href="#">Separated link</a></li>-->
<!--                        <li><a href="#">One more separated link</a></li>-->
<!--                    </ul>-->
<!--                </li>-->
                <li><a href="archive.html">Archive</a></li>
            </ul>
        </div><!--/.nav-collapse -->
    </div>
</div>
    <div class="container">
        

    <div class="page-header">
        <h1>Blog</h1>
    </div>
            <a href="blog/2022/javatricks.html"><h1>Tricks to Increase your productivity</h1></a>
        <p>Sun Nov 13 00:00:00 UTC 2022</p>
        <p><div class="paragraph">
<p>Is anybody faced a scenario where they found it&#8217;s efficient to automate the code generation so that eliminate monotonous work,
here are a few scenarios I faced and how few tricks helped me to increase the productivity</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><strong>Creating Database domain class from Schema</strong>, most of the time the database columns will be in snake case (eg: COLUMN_NAME), it will be error prone to create domain object of Table which have more than 20 columns manually. There are tools available in Hibernate and other ORM frame work to do it, but if don&#8217;t want to use it  please use the following snippet.</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre>public static void printSnakeListToJavaVar(List&lt;String&gt; snakeList) {
for (String columnName : snakeList) {
columnName = columnName.trim();
System.out.println("@Column(name=\"" + columnName + "\")");
System.out.println("String " + snakeToJavaVar(columnName.toLowerCase()) + ";");
}

    }
 public static String snakeToJavaVar(String str) {
        // Capitalize first letter of string
        str = str.substring(0, 1).toLowerCase()
                + str.substring(1);

        // Run a loop till string
        return capitalizeFirstCharAfterDelimiter(str, "_");
}
private static String capitalizeFirstCharAfterDelimiter(String str, String deLimiter) {
        // string contains delimiter
        while (str.matches(".*" + deLimiter + ".*")) {

            str = str.replaceFirst(
                    deLimiter + "[a-z]",
                    String.valueOf(
                            Character.toUpperCase(
                                    str.charAt(
                                            str.indexOf(deLimiter) + 1))));
        }

        return str;
    }</pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p><strong>Schema from Domain object</strong> like in the first example there might situations a dev will be encountering to create a schema from domain object, the following code snippet will be helpful in this scenario</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code>public static String camelToSnake(String str) {
        String result = "";
        char c = str.charAt(0);
        result = result + Character.toLowerCase(c);
        for (int i = 1; i &lt; str.length(); i++) {

            char ch = str.charAt(i);
            if (Character.isUpperCase(ch)) {
                result = result + '_';
                result
                        = result
                        + Character.toLowerCase(ch);
            }else {
                result = result + ch;
            }
        }

        return result;
    }</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="3">
<li>
<p><strong>Delimited String to Upper Camel Case</strong>  this is used when situation when dev has to Transform a String  or set of String&#8217;s which are Saved in ERP,DB etc. to a String presentable in UI</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code>CaseConvertor.stringToUpperCamelIncludeDelimiter("12 DAYS"," ")
public static String stringToUpperCamelIncludeDelimiter(String str, String delimiter) {
        return Arrays.stream(str.toLowerCase().split(delimiter))
                .map(CaseConvertor::capitalize)
                .collect(Collectors.joining(delimiter));
    }

    public static String capitalize(String str) {
        if (str == null || str.length() &lt;= 1) return str;
        return str.substring(0, 1).toUpperCase() + str.substring(1);
    }</code></pre>
</div>
</div></p>
            <a href="blog/2022/dynamo-local.html"><h1>Enhanced Dynamo DB  and Integration Test Using Dynamo Local</h1></a>
        <p>Sun Oct 16 00:00:00 UTC 2022</p>
        <p><div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>AWS Released  new Enhanced Dynamo Client <a href="https://docs.aws.amazon.com/sdk-for-java/latest/developer-guide/dynamodb-enhanced-client.html">Enhanced Dynamo Client</a> which helps Java developers to easily Implement  DAO Implementation without writing the mapping logic and AWS provides <a href="https://docs.aws.amazon.com/amazondynamodb/latest/developerguide/DynamoDBLocal.DownloadingAndRunning.html">Downloadable DynamoDb</a> which  helps developers to do the Integration testing with Dynamo DB without connecting to the Cloud.</p>
</div>
<div class="paragraph">
<p>This post explains how to Implement  a generic <strong>DynamoDBService</strong> Class using <a href="https://docs.aws.amazon.com/sdk-for-java/latest/developer-guide/dynamodb-enhanced-client.html">Enhanced Dynamo Client</a> and Write Unit/Integration Test Cases  using <a href="https://docs.aws.amazon.com/amazondynamodb/latest/developerguide/DynamoDBLocal.DownloadingAndRunning.html">Downloadable DynamoDb</a></p>
</div>
<div class="paragraph">
<p>The full source code can be found under following <a href="https://github.com/fazeem84/DynamoDbLocal">repo</a></p>
</div>
<div class="paragraph">
<p>I have used following links and github repos to build this example</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="https://www.baeldung.com/dynamodb-local-integration-testsl">baeldung</a></p>
</li>
<li>
<p><a href="https://github.com/redskap/aws-dynamodb-java-example-local-testing">redskap GitRepository</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="prerequisite">Prerequisite</h2>
<div class="sectionbody">
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Java &gt; 11</p>
</li>
<li>
<p>Gradle &gt; 5</p>
</li>
</ol>
</div>
</div>
</div>
<div class="sect1">
<h2 id="setting_enhanced_client_in_gradle">Setting Enhanced Client in Gradle</h2>
<div class="sectionbody">
<div class="paragraph">
<p>To set up enhanced Client in Gradle following dependecies needs to be added</p>
</div>
<div id="EnhancedDynamo" class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="gradle">    implementation 'com.amazonaws:aws-java-sdk-dynamodb:1.11.434'
    implementation 'software.amazon.awssdk:dynamodb:2.17.28'
    implementation 'software.amazon.awssdk:dynamodb-enhanced:2.17.28'</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="setting_up_dynamodb_local">Setting up DynamoDb Local</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Aws documentation provides steps to setting up <a href="https://docs.aws.amazon.com/amazondynamodb/latest/developerguide/DynamoDBLocal.DownloadingAndRunning.html">maven build</a> but Gradle setting up is not provided by AWS  and this library is not available central maven repo, so users needs to set up aws maven repo for setting DynamoDb Local</p>
</div>
<div id="MavenRepoSetup" class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="gradle">repositories {
    maven {
        name
         url "https://s3-us-west-2.amazonaws.com/dynamodb-local/release"
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>following dependency will add DynamoDbLocal to the gradle project</p>
</div>
<div id="DynamoLocalSetup" class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="gradle">testImplementation group: 'com.amazonaws', name: 'DynamoDBLocal', version: '1.11.119'</code></pre>
</div>
</div>
<div class="paragraph">
<p>you can find more info about the set up in <a href="https://github.com/redskap/aws-dynamodb-java-example-local-testing/blob/master/README.md" class="bare">https://github.com/redskap/aws-dynamodb-java-example-local-testing/blob/master/README.md</a>
 . As a part of test setup copy <a href="https://github.com/redskap/aws-dynamodb-java-example-local-testing/blob/master/src/test/java/io/redskap/java/aws/dynamodb/example/local/testing/AwsDynamoDbLocalTestUtils.java">AwsDynamoDbLocalTestUtils</a> and call <a href="https://github.com/redskap/aws-dynamodb-java-example-local-testing/blob/master/src/test/java/io/redskap/java/aws/dynamodb/example/local/testing/AwsDynamoDbLocalTestUtils.java#L30">AwsDynamoDbLocalTestUtils#initSqLite()</a> during setup function of JUnit Test class</p>
</div>
<div class="sect2">
<h3 id="dynamodb_domain_pojo">DynamoDb Domain POJO</h3>
<div class="paragraph">
<p>This class is POJO representation of Dynamo DB schema, I have used  <a href="https://projectlombok.org/">lombok</a> to avoid boiler plating of Getter and Setter methods, @DynamoDbBean represents dynamo db structure and @DynamoDbPartitionKey represents primary key id</p>
</div>
<div id="DynamoDB" class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="Java">@Data
@DynamoDbBean
public class Student {
    private String studentId;
    private String studentName;
    private String department;
    @DynamoDbPartitionKey
    @DynamoDbAttribute("studentId")
    public String getStudentId() {
        return studentId;
    }
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="dynamodb_service_implementation">DynamoDb Service Implementation</h3>
<div class="paragraph">
<p>This class has full DAO implementation</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>CreateTable</p>
</li>
<li>
<p>Insert/Update Item based on partitions key</p>
</li>
<li>
<p>Get Item by Id</p>
</li>
</ol>
</div>
<div class="paragraph">
<p><a href="https://github.com/fazeem84/DynamoDbLocal/blob/main/src/main/java/com/dynamo/local/service/DynamoDBService.java">DynamoDBService.java</a></p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="setting_up_junit_test_class">Setting Up JUnit Test class</h2>
<div class="sectionbody">
<div class="paragraph">
<p>During the startup JUnit will spin up a local dynamo DB instance and following code shows how to establish DynamoClient connectivity to local instance</p>
</div>
<div id="DynamoDB" class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="Java">private static final String TABLE_NAME = "Student";
private static  DynamoDBProxyServer server;
private static final String port = "8000";
private static final String uri = "http://localhost:"+port;

 @BeforeEach
    public void setUpTest() throws Exception {
        'AwsDynamoDbLocalTestUtils copied from the github repo as explained earlier'
        AwsDynamoDbLocalTestUtils.initSqLite();
        'This line will spin up local instance on 8080 port'
        server = ServerRunner.createServerFromCommandLineArgs(
                new String[]{"-inMemory", "-port", port});
        server.start();
        client=DynamoDbClient.builder()
                .endpointOverride(URI.create(uri))
                .region(Region.AF_SOUTH_1)'Any region should work '
                .credentialsProvider(StaticCredentialsProvider.create(
                        AwsBasicCredentials.create("fakeMyKeyId","fakeSecretAccessKey")))
                .build();

    }</code></pre>
</div>
</div>
</div>
</div></p>
            <a href="blog/2022/first-blog.html"><h1>Building your personal blog with JBake and GitHub Pages</h1></a>
        <p>Sat Jan 01 00:00:00 UTC 2022</p>
        <p><div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>This post explains steps to generate and deploy  personal blog site</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="techstack">TechStack</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="jbake">JBake</h3>
<div class="paragraph">
<p>JBake is a Java based, open source, static site/blog generator founded by Jonathan Bullock for developers &amp; designers (<a href="https://jbake.org/" class="bare">https://jbake.org/</a>) .The main highlights of JBake are</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Open Source - Source available on GitHub, licensed under MIT License</p>
</li>
<li>
<p>Cross platform support - The binary distribution runs on Windows, Unix/Linux and Mac OS X.</p>
</li>
<li>
<p>Content Formats - Supports AsciiDoc, Markdown and good old HTML formatted content.</p>
</li>
<li>
<p>Open Structure - Structure your content any way you see fit.</p>
</li>
<li>
<p>Blog Aware - RSS/Atom feed, archive and tag support.</p>
</li>
<li>
<p>Draft support - View your draft content before publishing it and making it available to the world.</p>
</li>
<li>
<p>Self contained - Binary distribution contains everything you need apart from a JRE, no complicated environment setup with 3rd party dependencies.</p>
</li>
<li>
<p>Build tools - Plugins available for Gradle, Maven, mill, SBuild and sbt.</p>
</li>
<li>
<p>Template Support - Freemarker, Groovy, Thymeleaf, Jade and Pebble based templates &amp; scripting support.</p>
</li>
<li>
<p>CSS Framework Support - Easily integrate CSS frameworks such as Bootstrap and Foundation.</p>
</li>
<li>
<p>Custom Metadata - Add as much metadata to content as you like, also exposed to templates.</p>
</li>
<li>
<p>Storage Support - Store your site content in Dropbox, CVS, SVN, Git or whatever you want.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="gradle">Gradle</h3>
<div class="paragraph">
<p>In this post I used  Gradle  to build the static content and deploy the website using Github actions</p>
</div>
</div>
<div class="sect2">
<h3 id="github_pages">GitHub Pages</h3>
<div class="paragraph">
<p>GitHub pages (<a href="https://pages.github.com/" class="bare">https://pages.github.com/</a>) is a hosting service provided GitHub which help GitHub users to their website directly from github repo .</p>
</div>
</div>
<div class="sect2">
<h3 id="github_action">GitHub Action</h3>
<div class="paragraph">
<p>GitHub action is a CI/CD service provided by GitHub</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="steps_for_setting_up_your_blog">Steps for Setting up your Blog</h2>
<div class="sectionbody">
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Setup the GitHub Repository</p>
<div class="ulist">
<ul>
<li>
<p>login to github and create new public repository</p>
<div class="paragraph">
<p><span class="image"><img src="/img/first-blog/git_create_project.JPG" alt="Create Public Repository"></span></p>
</div>
</li>
<li>
<p>clone the repo into your local  either by using IDE&#8217;s or command line</p>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="ruby">git clone https://github.com/fazeem84/TestJBake.git</code></pre>
</div>
</div>
</li>
</ul>
</div>
</li>
<li>
<p>Setup JBake using gradle</p>
<div class="ulist">
<ul>
<li>
<p>add build.gradle and include JBake gradle plugin as shown below</p>
<div class="listingblock">
<div class="content">
<pre>buildscript {
    repositories {
        mavenCentral()
    }
    dependencies {
        classpath  'commons-configuration:commons-configuration:1.10'
    }
}

plugins {
    id 'org.jbake.site' version '5.5.0'
}
bakeInit {
    template = 'freemarker'
}</pre>
</div>
</div>
<div class="paragraph">
<p>this plugin has capability of downloading the template to your source folder from a url or a pre-defined teamplate available in JBake GitHub Repo for more information please check <a href="https://github.com/jbake-org/jbake-gradle-plugin/blob/master/README.adoc" class="bare">https://github.com/jbake-org/jbake-gradle-plugin/blob/master/README.adoc</a></p>
</div>
</li>
<li>
<p>Execute Gradle JBake Init command</p>
<div class="listingblock">
<div class="content">
<pre>gradle bakeInit</pre>
</div>
</div>
<div class="paragraph">
<p>This will generate the following folder structure with template source code</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="/img/first-blog/folder_structure.JPG" alt="New Folder Structure"></span></p>
</div>
<div class="paragraph">
<p>if you want know more details about the folders inside directory please refer <a href="https://jbake.org/docs/2.6.7/#project_structure" class="bare">https://jbake.org/docs/2.6.7/#project_structure</a></p>
</div>
</li>
<li>
<p>Execute bake step</p>
<div class="paragraph">
<p>bake step will transform  the source  contents  in different format like .md,adoc etc to pure html ,bake step can be triggered using following gradle command</p>
</div>
<div class="listingblock">
<div class="content">
<pre>gradle bake</pre>
</div>
</div>
<div class="paragraph">
<p>Once it&#8217;s successfully executed the static content will be generated under build folder</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="/img/first-blog/build_folder.JPG" alt="build Folder Structure"></span></p>
</div>
</li>
<li>
<p>Running web server from your local environment</p>
<div class="paragraph">
<p>run following gradle command to start the webserver, the server will be running on 8080 port by default</p>
</div>
<div class="listingblock">
<div class="content">
<pre>gradle bakePreview --no-daemon</pre>
</div>
</div>
<div class="paragraph">
<p><span class="image"><img src="/img/first-blog/blog-local.JPG" alt="Local Blog"></span></p>
</div>
</li>
</ul>
</div>
</li>
<li>
<p>Setup GitHub Action</p>
<div class="paragraph">
<p>This section describes how to run gradle bake command once the code  pushed to the master branch and in this example we have set up a separate branch to host git hub page so last step of build execution is to copy the gnerated files into the specified branch</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Make sure you have all permission to run the GitHub action <a href="https://docs.github.com/en/repositories/managing-your-repositorys-settings-and-features/enabling-features-for-your-repository/managing-github-actions-settings-for-a-repository" class="bare">https://docs.github.com/en/repositories/managing-your-repositorys-settings-and-features/enabling-features-for-your-repository/managing-github-actions-settings-for-a-repository</a></p>
</li>
<li>
<p>create a new branch(gh-pages) from where the git hub page will be served in future steps</p>
</li>
<li>
<p>create .git/workflow folder and create yaml/yml file build file and copy paste  the following code and check-in/push the repository into github(Make sure your committing tha gradle folder and gradle related file in the  root folder )</p>
<div class="listingblock">
<div class="content">
<pre>name: Jbake-WorkFlow
on:
  # Trigger the workflow on push or pull request,
  # but only for the main branch
  push:
    branches:
      - master
jobs:
  build:
    runs-on: ubuntu-latest
    steps:
      -
        uses: actions/checkout@v2
      -
        name: "Set up JDK 11 "
        uses: actions/setup-java@v2
        with:
          distribution: adopt
          java-version: "11"
      -
        name: "Validate Gradle wrapper"
        uses: gradle/wrapper-validation-action@e6e38bacfdf1a337459f332974bb2327a31aaf4b
      - name: Make gradlew executable
        run: chmod +x ./gradlew
      -
        name: "Build with Gradle"
        run: "./gradlew bake"
      -
        name: Deploy
        uses: JamesIves/github-pages-deploy-action@4.1.7
        with:
          BRANCH: gh-pages
          FOLDER: build/jbake</pre>
</div>
</div>
</li>
<li>
<p>after pushing the code build will kick start in the action section and generated file will be copied to a new branch (gh-pages in this example,please check deploy stage in yaml file)</p>
<div class="paragraph">
<p><span class="image"><img src="/img/first-blog/action.JPG" alt="action Blog"></span></p>
</div>
<div class="paragraph">
<p><span class="image"><img src="/img/first-blog/gh-pages.JPG" alt="GH Pages"></span></p>
</div>
<div class="paragraph">
<p>Source Code is available in <a href="https://github.com/fazeem84/TestJBake" class="bare">https://github.com/fazeem84/TestJBake</a></p>
</div>
</li>
</ul>
</div>
</li>
<li>
<p>Setup GitHub Page</p>
<div class="ulist">
<ul>
<li>
<p>Navigate to repository settings and select the branch from which the website is being server from (gh-page in our example) and save the settings</p>
<div class="paragraph">
<p><span class="image"><img src="/img/first-blog/git-hub-page.JPG" alt="Page Settings"></span></p>
</div>
</li>
<li>
<p>Page is successfully hosted on the url as in the GitHub Page settings</p>
</li>
</ul>
</div>
</li>
</ol>
</div>
</div>
</div></p>
    
    <hr />

    <p>Older posts are available in the <a href="${content.rootpath}${config.archive_file}">archive</a>.</p>

    </div>
</div>

<div id="footer">
    <div class="container">
        <p class="muted credit">&copy; 2014 | Mixed with <a href="http://getbootstrap.com/">Bootstrap v3.1.1</a> | Baked with <a href="http://jbake.org">JBake ${version}</a></p>
    </div>
</div>

<!-- Le javascript
   ================================================== -->
<!-- Placed at the end of the document so the pages load faster -->
<script src="js/jquery-1.11.1.min.js"></script>
<script src="js/bootstrap.min.js"></script>
<script src="js/prettify.js"></script>
</body>
</html>
